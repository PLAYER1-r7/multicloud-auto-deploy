<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Simple SNS{% endblock %}</title>
    <script>
      (function () {
        const saved = localStorage.getItem("theme");
        const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved === "dark" || saved === "light" ? saved : (prefersDark ? "dark" : "light");
        document.documentElement.setAttribute("data-theme", theme);
      })();
    </script>
    <link rel="stylesheet" href="{{ base_path }}/static/app.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <button class="brand brand-button" type="button" data-href="{{ base_path }}/" aria-label="Home">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M3 10.5L12 3l9 7.5"></path>
            <path d="M5 10v10h14V10"></path>
          </svg>
          <span class="brand-text">Simple SNS</span>
        </button>
        <nav class="nav">
          <button class="button ghost nav-button icon-only" type="button" data-href="{{ base_path }}/" aria-label="Home">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 10.5L12 3l9 7.5"></path>
              <path d="M5 10v10h14V10"></path>
            </svg>
            <span class="sr-only">Home</span>
          </button>
          <button class="button ghost nav-button icon-only" type="button" data-href="{{ base_path }}/profile" aria-label="Profile">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="8" r="4"></circle>
              <path d="M4 20c1.8-3.5 5-5 8-5s6.2 1.5 8 5"></path>
            </svg>
            <span class="sr-only">Profile</span>
          </button>
          {% if logged_in %}
            <button class="button ghost nav-button icon-only" type="button" data-href="{{ base_path }}/logout" aria-label="Logout">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M9 16l-4-4 4-4"></path>
                <path d="M5 12h10"></path>
                <path d="M13 5h6v14h-6"></path>
              </svg>
              <span class="sr-only">Logout</span>
            </button>
          {% else %}
            <button class="button ghost nav-button icon-only" type="button" data-href="{{ base_path }}/login" aria-label="Login">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M15 8l4 4-4 4"></path>
                <path d="M19 12H9"></path>
                <path d="M11 5H5v14h6"></path>
              </svg>
              <span class="sr-only">Login</span>
            </button>
          {% endif %}
          <button class="button ghost theme-toggle icon-only" type="button" id="theme-toggle" aria-pressed="false" aria-label="Toggle theme">
            <svg class="icon icon-sun" viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v3"></path>
              <path d="M12 19v3"></path>
              <path d="M2 12h3"></path>
              <path d="M19 12h3"></path>
              <path d="M4.5 4.5l2.1 2.1"></path>
              <path d="M17.4 17.4l2.1 2.1"></path>
              <path d="M4.5 19.5l2.1-2.1"></path>
              <path d="M17.4 6.6l2.1-2.1"></path>
            </svg>
            <svg class="icon icon-moon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M21 14.5A8.5 8.5 0 1 1 9.5 3a7 7 0 0 0 11.5 11.5z"></path>
            </svg>
            <span class="sr-only">Toggle theme</span>
          </button>
        </nav>
      </div>
    </header>
    <main class="container" id="content">
      {% block content %}{% endblock %}
    </main>
    <div class="lightbox" id="lightbox" hidden>
      <div class="lightbox-backdrop" data-close></div>
      <div class="lightbox-body" role="dialog" aria-modal="true">
        <button class="lightbox-close" type="button" data-close aria-label="Close image">Close</button>
        <img class="lightbox-image" id="lightbox-image" alt="Expanded image" />
      </div>
    </div>
    <script src="{{ base_path }}/static/lightbox.js"></script>
    <script src="{{ base_path }}/static/timeline.js"></script>
    <script src="{{ base_path }}/static/theme.js"></script>
    <script src="{{ base_path }}/static/navigation.js"></script>
  </body>
</html>
